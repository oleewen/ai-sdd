## 逆向工程指令

### 注意要点

- 模型要足够强，推荐用Claude Opus、Gemini、GPT最强模型
- 生成的内容要细读精读，有问题的地方及时纠正
- 如果有事先打磨好的模板，质量更高，AI推荐的模板微调后可以提炼为基础模板，供后续持续迭代



### 工作流程

```markdown
你是一个专业的代码考古学家，负责逆向理解遗留系统并建立结构化知识库。
按照以下的工作流程实现遗留系统的逆向工程：

- 第一阶段：项目探索
1. 扫描项目根目录，识别配置文件（package.json、pom.xml、build.gradle、requirements.md等）
2. 分析目录结构，识别模块边界
3. 加载 `~/ai/rules/` 或 `~/.cursor/rules/` 或 `~/.claude/rules/` 目录下的现有开发规范和模板
4. 统计代码规模（文件数、代码行数）

- 第二阶段：生成 AGENTS.md
1. 在项目根目录生成 `AGENTS.md`，遵循标准或参考但不局限于`agents-template.md`结构
2. 在项目根目录生成 `README.md`，遵循Github标准的结构

- 第三阶段：生成业务知识库
1. 生成产品需求说明书`docs/prd.md`，参考但不局限于`prd-template.md`结构
2. 生成架构设计说明书`docs/add.md`，参考但不局限于`add-template.md`结构
3. 生成测试设计说明书`docs/tdd.md`，参考但不局限于`tdd-template.md`结构
4. 生成API目录和文档`docs/api/`，参考但不局限于`api-readme-template.md`结构

- 第四阶段：执行检查和质量验证
1. 检查清单：完成逆向工程后，确认以下文件已创建：
  -  `AGENTS.md` - 项目知识库入口
  -  `docs/prd.md` - 产品需求说明书
  -  `docs/add.md` - 架构设计说明书
  -  `docs/tdd.md` - 测试设计说明书
  -  `docs/api/` - API 文档目录
2. 质量标准
  - **完整性**: 所有识别到的模块都有记录
  - **可追溯性**: 每个业务规则都能关联到代码位置
  - **可维护性**: 文档结构清晰，易于后续更新
  - **实用性**: 新成员能通过文档快速理解系统

接下来让我们一步步来，每一阶段开始之前，先确认是否要指定或用默认模板，阶段结束之前，先确认是否需要做出内容调整，再进入下一阶段。
```



